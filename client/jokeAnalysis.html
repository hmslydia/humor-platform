
<template name="jokeAnalysis">

  <div class='container'>
      <div class="row">
        <div class="col-md-12">
          <div class='title'>Why is this funny?</div>
        </div>
      </div>  
      
      <div class="row">
        
        <div class="col-md-6">    
          <div class='joke_text'>
            {{{joke_text}}}
          </div>
        </div>
        
        <div class="col-md-3">

        
        
          <table class="table">
          <tbody>
            <tr>
              <td>Skip: </td>
              <td>{{counts.skips}}</td>
            </tr>
            
            <tr>
              <td>Don't get it: </td>
              <td>{{counts.dontGetIts}}</td>
            </tr>
      
            <tr>
              <td>Funny: </td>
              <td>
                {{counts.funnyYeses}} Yes<br>
                {{counts.funnyNos}} No <br>
                {{counts.funnyUnclears}} Maybe
              </td>
            </tr>
          </tbody>
          </table>
        
        </div>
      </div>  
       <!--
      <div class="row">
          <div class="col-md-4">
            {{> insultSummary}}
          </div>
          
          <div class="col-md-4">
            {{> connectTheDotsSummary}}
          </div>
          
          <div class="col-md-4">
              ExpectationViolation goes here
          </div>        
      </div>
      -->
      <div class="row">
        <div class="col-md-12">      
          <div class="bs-example">
          	<ul class="nav nav-pills">
	            {{#each analysisTypeSummary}}
	              <li class="{{selected}}"><a href="#" class="analysisTypeTab" id="{{id}}" >{{name}}</a></li>
              {{/each}}
          	</ul>
          </div>
        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-12">  
          {{> discussion}}
        </div>  
      </div>
  </div>

</template>

<template name="discussion">
{{#if eq selectedTagId "insultTag"}}
  {{> insultYesThread}}
{{/if}}

{{#if eq selectedTagId "connectTheDotsTag"}}
  {{> connectTheDotsYesThread}}
{{/if}}
</template>

<template name="insultYesThread">
  {{>insultSummary}}
</template>

<template name="connectTheDotsYesThread">
  {{>connectTheDotsSummary}}
</template>

<template name="analysisTypeTag">
  <div id="{{id}}" class="analysisTypeTag {{selected}}">
    <h3>{{name}}</h3>
  </div>  
</template>

<template name="insultSummary">
<h3>Insult Summary</h3>

  <div class="col-md-4">      
    <div style='width: 100px'>
      <table class="table">
      <tbody>
      <tr><td>Yes</td><td>{{counts.insultYeses}} {{#if eq myInsultData.insultYN "yes"}}<b>(you)</b>{{/if}}</td></tr>
      <tr><td>No</td><td>{{counts.insultNos}} {{#if eq myInsultData.insultYN "no"}}<b>(you)</b>{{/if}} </td></tr>
      <tr><td>Unclear</td><td>{{counts.insultUnclears}} {{#if eq myInsultData.insultYN "unclear"}}<b>(you)</b>{{/if}}</td></tr>
      </tbody>
      </table>
    </div>
    
    {{#if myInsultData.contributed}}
    {{else}}
      <button id='addInsultAnalysis' class="btn btn-primary">Add Insult Analysis</button>
      <div id="insultUI" style="display:none;">
        {{> insultAnalysis}}
        <button id='submitInsult' class="btn btn-primary">Submit</button>
        <button id='closeInsult' class="btn btn-primary">X</button>
      </div>
    {{/if}}
  </div>
  <div class="col-md-5"> 
    {{#if myInsultData.hasComment}}
      <div class="myAnswer">
      My answer: {{myInsultData.insultYN}}<br>
      {{#if myInsultData.yesComment}}
        <div>
          Who: <b>{{myInsultData.insultWho}}</b> {{myInsultData.insultWhy}}<br>        
          {{#if myInsultData.i_like}}
            You and {{myInsultData.likeCount}} people like this
          {{else}}
            {{myInsultData.likeCount}} likes <br>
          {{/if}}
        </div>
      {{/if}}
      
      {{#if myInsultData.unclearComment}}
        <div>
        Unclear: {{myInsultData.unclearWhy}}
        </div>
      {{/if}}
      </div>
    {{/if}}
  
  
  {{#each summary.insultYesExplain}}  
    <div style="padding:5px; margin:5px; background-color:lightgreen">
      Yes: <b>{{this.who}}</b> {{this.why}}<br>
      {{#if this.i_like}}
        <span class="glyphicon glyphicon-thumbs-up"></span> You and {{this.likeCount}} others
      {{else}}
        <span class="glyphicon glyphicon-thumbs-up"></span> {{this.likeCount}} <a href="#" class="voteUp"> like </a><br>
      {{/if}} 
    </div> 
  {{/each}}


  {{#each summary.insultUnclearExplain}}  
    <div style="padding:5px; margin:5px; background-color:lightyellow">
      Unclear: {{this.unclearWhy}}<br>
      {{#if this.i_like}}
        <span class="glyphicon glyphicon-thumbs-up"></span> You and {{this.likeCount}} others
      {{else}}
        <span class="glyphicon glyphicon-thumbs-up"></span> {{this.likeCount}} <a href="#" class="voteUp"> like </a><br>
      {{/if}} 
    </div> 
  {{/each}}  
  </div>
</template>



<template name="connectTheDotsSummary">
  <h3>Connect the Dots Summary</h3>
  
   <div class="col-md-4">      
    <div style='width: 100px'>
      <table class="table">
      <tbody>
      <tr><td>Yes</td><td>{{counts.connectTheDotsYeses}} {{#if eq myCTDData.connectTheDotsYN "yes"}}<b>(you)</b>{{/if}}</td></tr>
      <tr><td>No</td><td>{{counts.connectTheDotsNos}} {{#if eq myCTDData.connectTheDotsYN "no"}}<b>(you)</b>{{/if}} </td></tr>
      <tr><td>Unclear</td><td>{{counts.connectTheDotsUnclears}} {{#if eq myCTDData.connectTheDotsYN "unclear"}}<b>(you)</b>{{/if}}</td></tr>
      </tbody>
      </table>
    </div>
   
   
    {{#if myCTDData.hasComment}}
      <div class="myAnswer">
      My answer: {{myCTDData.connectTheDotsYN}}<br>
      {{#if myCTDData.yesComment}}
        <div>
          What: {{myCTDData.connectWhat}}<br>
          
          {{#if myCTDData.i_like}}
            You and {{myCTDData.likeCount}} people like this
          {{else}}
            {{myCTDData.likeCount}} likes <br>
          {{/if}}
        </div>
      {{/if}}
      
      {{#if myCTDData.unclearComment}}
        <div>
        Unclear: {{myCTDData.unclearWhy}}
        </div>
      {{/if}}
      </div>
    {{/if}}
    
    {{#if myCTDData.contributed}}
    {{else}}
      <button id='addConnectTheDotsAnalysis' class="btn btn-primary">Add Connect The Dots<br> Analysis</button>
      <div id="connectTheDotsUI" style="display:none;">
        {{> connectTheDotsAnalysis}}
        <button id='submitConnectTheDots' class="btn btn-primary">Submit</button>
        <button id='closeConnectTheDots' class="btn btn-primary">X</button>
      </div>
    {{/if}}
   </div>
   <div class="col-md-5">

  
  {{#each summary.connectTheDotsYesExplain}}  
    <div style="padding:5px; margin:5px; background-color:lightgreen">
      Yes: <b>{{this.who}}</b> {{this.why}}<br>
      {{#if this.i_like}}
        <span class="glyphicon glyphicon-thumbs-up"></span> You and {{this.likeCount}} others
      {{else}}
        <span class="glyphicon glyphicon-thumbs-up"></span> {{this.likeCount}} <a href="#" class="voteUp"> like </a><br>
      {{/if}} 
    </div> 
  {{/each}}


  {{#each summary.connectTheDotsUnclearExplain}}  
    <div style="padding:5px; margin:5px; background-color:lightyellow">
      Unclear: {{this.unclearWhy}}<br>
      {{#if this.i_like}}
        <span class="glyphicon glyphicon-thumbs-up"></span> You and {{this.likeCount}} others
      {{else}}
        <span class="glyphicon glyphicon-thumbs-up"></span> {{this.likeCount}} <a href="#" class="voteUp"> like </a><br>
      {{/if}} 
    </div> 
  {{/each}}  
   </div>
</template>